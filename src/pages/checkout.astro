---
import Layout from "../layouts/Layout.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
---

<Layout title="Checkout - PlastiClean">
    <Header />

    <div class="checkout-page">
        <div class="container">
            <div class="checkout-grid">
                <!-- Formulario de Checkout -->
                <div class="checkout-form-section">
                    <h1 class="page-title">Finalizar Compra</h1>

                    <form id="checkout-form">
                        <!-- Información de Contacto -->
                        <div class="form-section">
                            <h2 class="section-title">
                                Información de Contacto
                            </h2>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="firstName">Nombre *</label>
                                    <input
                                        type="text"
                                        id="firstName"
                                        name="firstName"
                                        required
                                    />
                                </div>

                                <div class="form-group">
                                    <label for="lastName">Apellido *</label>
                                    <input
                                        type="text"
                                        id="lastName"
                                        name="lastName"
                                        required
                                    />
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="email">Email *</label>
                                <input
                                    type="email"
                                    id="email"
                                    name="email"
                                    required
                                />
                                <span class="error-message" id="email-error"
                                ></span>
                            </div>

                            <div class="form-group">
                                <label for="phone">Teléfono</label>
                                <input
                                    type="tel"
                                    id="phone"
                                    name="phone"
                                    placeholder="+56 9 1234 5678"
                                />
                            </div>
                        </div>

                        <!-- Dirección de Envío -->
                        <div class="form-section">
                            <h2 class="section-title">Dirección de Envío</h2>

                            <div class="form-group">
                                <label for="address">Dirección *</label>
                                <input
                                    type="text"
                                    id="address"
                                    name="address"
                                    required
                                />
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="city">Ciudad *</label>
                                    <input
                                        type="text"
                                        id="city"
                                        name="city"
                                        required
                                    />
                                </div>

                                <div class="form-group">
                                    <label for="region">Región *</label>
                                    <select id="region" name="region" required>
                                        <option value=""
                                            >Seleccionar región</option
                                        >
                                        <option value="metropolitana"
                                            >Región Metropolitana</option
                                        >
                                        <option value="valparaiso"
                                            >Valparaíso</option
                                        >
                                        <option value="biobio">Biobío</option>
                                        <option value="otras"
                                            >Otra región</option
                                        >
                                    </select>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="postalCode">Código Postal *</label>
                                <input
                                    type="text"
                                    id="postalCode"
                                    name="postalCode"
                                    maxlength="7"
                                    required
                                />
                            </div>
                        </div>

                        <!-- Método de Pago -->
                        <div class="form-section">
                            <h2 class="section-title">Método de Pago</h2>

                            <div class="payment-methods">
                                <label class="payment-option">
                                    <input
                                        type="radio"
                                        name="paymentMethod"
                                        value="credit"
                                        checked
                                    />
                                    <div class="payment-card">
                                        <svg
                                            class="payment-icon"
                                            xmlns="http://www.w3.org/2000/svg"
                                            fill="none"
                                            viewBox="0 0 24 24"
                                            stroke="currentColor"
                                        >
                                            <path
                                                stroke-linecap="round"
                                                stroke-linejoin="round"
                                                stroke-width="2"
                                                d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"
                                            ></path>
                                        </svg>
                                        <div>
                                            <div class="payment-title">
                                                Tarjeta de Crédito
                                            </div>
                                            <div class="payment-desc">
                                                Visa, Mastercard, Amex
                                            </div>
                                        </div>
                                    </div>
                                </label>

                                <label class="payment-option">
                                    <input
                                        type="radio"
                                        name="paymentMethod"
                                        value="debit"
                                    />
                                    <div class="payment-card">
                                        <svg
                                            class="payment-icon"
                                            xmlns="http://www.w3.org/2000/svg"
                                            fill="none"
                                            viewBox="0 0 24 24"
                                            stroke="currentColor"
                                        >
                                            <path
                                                stroke-linecap="round"
                                                stroke-linejoin="round"
                                                stroke-width="2"
                                                d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"
                                            ></path>
                                        </svg>
                                        <div>
                                            <div class="payment-title">
                                                Tarjeta de Débito
                                            </div>
                                            <div class="payment-desc">
                                                Redcompra
                                            </div>
                                        </div>
                                    </div>
                                </label>

                                <label class="payment-option">
                                    <input
                                        type="radio"
                                        name="paymentMethod"
                                        value="transfer"
                                    />
                                    <div class="payment-card">
                                        <svg
                                            class="payment-icon"
                                            xmlns="http://www.w3.org/2000/svg"
                                            fill="none"
                                            viewBox="0 0 24 24"
                                            stroke="currentColor"
                                        >
                                            <path
                                                stroke-linecap="round"
                                                stroke-linejoin="round"
                                                stroke-width="2"
                                                d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"
                                            ></path>
                                        </svg>
                                        <div>
                                            <div class="payment-title">
                                                Transferencia Bancaria
                                            </div>
                                            <div class="payment-desc">
                                                Pago directo
                                            </div>
                                        </div>
                                    </div>
                                </label>
                            </div>
                        </div>

                        <button
                            type="submit"
                            class="submit-btn"
                            id="submit-btn"
                        >
                            <svg
                                class="btn-icon"
                                xmlns="http://www.w3.org/2000/svg"
                                fill="none"
                                viewBox="0 0 24 24"
                                stroke="currentColor"
                            >
                                <path
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    stroke-width="2"
                                    d="M5 13l4 4L19 7"></path>
                            </svg>
                            Confirmar Compra
                        </button>
                    </form>
                </div>

                <!-- Resumen de Orden -->
                <div class="order-summary-section">
                    <div class="summary-sticky">
                        <h2 class="summary-title">Resumen de Orden</h2>

                        <div id="order-items" class="order-items">
                            <!-- Se llenará dinámicamente -->
                        </div>

                        <style>
                            .checkout-page {
                                min-height: 100vh;
                                background: #fafafa;
                                padding-top: 56px;
                            }

                            .container {
                                max-width: 1280px;
                                margin: 0 auto;
                                padding: 2rem 1rem;
                            }

                            .checkout-grid {
                                display: grid;
                                grid-template-columns: 1fr;
                                gap: 2rem;
                            }

                            @media (min-width: 1024px) {
                                .checkout-grid {
                                    grid-template-columns: 1.5fr 1fr;
                                }
                            }

                            .page-title {
                                font-size: 2rem;
                                font-weight: 700;
                                color: #111827;
                                margin-bottom: 2rem;
                            }

                            .form-section {
                                background: white;
                                padding: 2rem;
                                border-radius: 0.75rem;
                                margin-bottom: 1.5rem;
                                box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
                            }

                            .section-title {
                                font-size: 1.25rem;
                                font-weight: 600;
                                color: #111827;
                                margin-bottom: 1.5rem;
                            }

                            .form-row {
                                display: grid;
                                grid-template-columns: 1fr;
                                gap: 1rem;
                            }

                            @media (min-width: 640px) {
                                .form-row {
                                    grid-template-columns: 1fr 1fr;
                                }
                            }

                            .form-group {
                                margin-bottom: 1.25rem;
                            }

                            .form-group label {
                                display: block;
                                font-weight: 500;
                                color: #374151;
                                margin-bottom: 0.5rem;
                                font-size: 0.9375rem;
                            }

                            .form-group input,
                            .form-group select {
                                width: 100%;
                                padding: 0.75rem;
                                border: 1px solid #d1d5db;
                                border-radius: 0.5rem;
                                font-size: 1rem;
                                transition: all 0.2s;
                            }

                            .form-group input:focus,
                            .form-group select:focus {
                                outline: none;
                                border-color: #2563eb;
                                box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
                            }

                            .error-message {
                                display: none;
                                color: #ef4444;
                                font-size: 0.875rem;
                                margin-top: 0.25rem;
                            }

                            .payment-methods {
                                display: flex;
                                flex-direction: column;
                                gap: 1rem;
                            }

                            .payment-option {
                                cursor: pointer;
                            }

                            .payment-option input[type="radio"] {
                                display: none;
                            }

                            .payment-card {
                                display: flex;
                                align-items: center;
                                gap: 1rem;
                                padding: 1rem;
                                border: 2px solid #e5e7eb;
                                border-radius: 0.5rem;
                                transition: all 0.2s;
                            }

                            .payment-option input:checked + .payment-card {
                                border-color: #2563eb;
                                background: #eff6ff;
                            }

                            .payment-icon {
                                width: 32px;
                                height: 32px;
                                color: #6b7280;
                            }

                            .payment-option
                                input:checked
                                + .payment-card
                                .payment-icon {
                                color: #2563eb;
                            }

                            .payment-title {
                                font-weight: 600;
                                color: #111827;
                            }

                            .payment-desc {
                                font-size: 0.875rem;
                                color: #6b7280;
                            }

                            .submit-btn {
                                width: 100%;
                                display: flex;
                                align-items: center;
                                justify-content: center;
                                gap: 0.5rem;
                                background: #2563eb;
                                color: white;
                                border: none;
                                padding: 1rem;
                                border-radius: 0.5rem;
                                font-size: 1.125rem;
                                font-weight: 600;
                                cursor: pointer;
                                transition: all 0.2s;
                            }

                            .submit-btn:hover {
                                background: #1d4ed8;
                                transform: translateY(-2px);
                                box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
                            }

                            .btn-icon {
                                width: 24px;
                                height: 24px;
                            }

                            .summary-sticky {
                                position: sticky;
                                top: 72px;
                                background: white;
                                padding: 2rem;
                                border-radius: 0.75rem;
                                box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
                            }

                            .summary-title {
                                font-size: 1.25rem;
                                font-weight: 600;
                                color: #111827;
                                margin-bottom: 1.5rem;
                            }

                            .order-items {
                                max-height: 400px;
                                overflow-y: auto;
                                margin-bottom: 1.5rem;
                            }

                            .order-item {
                                display: flex;
                                gap: 1rem;
                                padding: 1rem 0;
                                border-bottom: 1px solid #f3f4f6;
                            }

                            .item-image {
                                width: 64px;
                                height: 64px;
                                object-fit: cover;
                                border-radius: 0.5rem;
                            }

                            .item-info {
                                flex: 1;
                            }

                            .item-name {
                                font-weight: 500;
                                color: #111827;
                                margin-bottom: 0.25rem;
                            }

                            .item-quantity {
                                font-size: 0.875rem;
                                color: #6b7280;
                            }

                            .item-price {
                                font-weight: 600;
                                color: #111827;
                            }

                            .summary-totals {
                                border-top: 2px solid #e5e7eb;
                                padding-top: 1rem;
                            }

                            .total-row {
                                display: flex;
                                justify-content: space-between;
                                margin-bottom: 0.75rem;
                                color: #374151;
                            }

                            .total-final {
                                font-size: 1.25rem;
                                font-weight: 700;
                                color: #111827;
                                padding-top: 0.75rem;
                                border-top: 1px solid #e5e7eb;
                            }

                            .free-shipping-banner {
                                display: flex;
                                align-items: center;
                                gap: 0.5rem;
                                background: #d1fae5;
                                color: #065f46;
                                padding: 0.75rem;
                                border-radius: 0.5rem;
                                margin-top: 1rem;
                                font-weight: 600;
                            }

                            .banner-icon {
                                width: 20px;
                                height: 20px;
                            }
                        </style>
                    </div>
                </div>
            </div>
        </div>
    </div></Layout
>
